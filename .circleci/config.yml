version: 2
jobs:
  build:
    docker:
      - image: archlinux/base
    steps:
      - run:
          name: Install Tools
          command: 
          - pacman -Syu --noconfirm --noprogressbar 
          - pacman -Sy --noconfirm --noprogressbar make gcc cmake git openssh
      - checkout
      - run:
          name: Compile
          command: 
            - cmake . -G"Unix Makefiles" 
            - make 
            - mv helloworld $CIRCLE_ARTIFACTS/
workflows:
  version: 2
  nightly_workflow:
    triggers:
      - schedule:
          cron: "0 1 * * *" # UTCで記述。この場合は朝10時
          filters:
            branches:
              only:
                - master
    jobs:
      - build
